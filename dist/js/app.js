function initMap(){"use strict";var e={center:new google.maps.LatLng(41.8252,-71.4159719),zoom:15};map=new google.maps.Map(document.getElementById("map-canvas"),e)}var map;$(document).ready(function(){"use strict";initMap(),$("#searchFS-btn").on("mouseover",function(){$("#searchFS-btn").attr("src","img/browse-hover.png")}),$("#searchFS-btn").on("mouseleave",function(){$("#searchFS-btn").attr("src","img/browse.png")}),$("#nav-btn").click(function(){$("#place-menu").toggleClass("active"),$("#map-canvas").toggleClass("active"),$("#nav-btn").text("+"===$("#nav-btn").text()?"X":"+")}),Mousetrap.bind("shift+s",function(){document.getElementById("search-box").focus()});var e=function(e){this.title=e.title,this.category=e.category,this.newMarker=function(){this.marker=new google.maps.Marker({position:new google.maps.LatLng(e.lat,e.lng),icon:e.markerIcon,title:e.title,placeInfo:e.placeInfo,map:map,url:e.url,animation:google.maps.Animation.DROP})}},n=function(){function n(e){e.setAnimation(null!==e.getAnimation()?null:google.maps.Animation.BOUNCE)}var a=this;a.placeList=ko.observableArray([]),places.forEach(function(n){a.placeList().push(new e(n))});var t=a.placeList().length;a.allMarkers=function(){for(var e=0;t>e;e++)a.placeList()[e].newMarker()},a.allMarkers();for(var r=[],o=0;t>o;o++)a.placeList()[o].marker.placeInfo=ko.observable("");var i=function(){function e(){r.sort(function(e,n){return e.name<n.name?-1:e.name>n.name?1:0}),console.log(r);for(var e=0;t>e;e++)a.placeList()[e].marker.placeInfo('<h2 id="iw-title">'+r[e].name+"</h2><p>Phone: "+r[e].phone+'</p><a href="'+r[e].url+'" target="_blank">website</a><a href="https://foursquare.com/v/'+r[e].id+'" target="_blank"><img src="https://ss0.4sqi.net/img/poweredByFoursquare/poweredby-one-color-cdf070cc7ae72b3f482cf2d075a74c8c.png"></a>')}for(var n=0;t>n;n++){var o=a.placeList()[n].marker.position.toString().replace(/\s+/g,"").replace("(","").replace(")","");console.log(o);var i="https://api.foursquare.com/v2/venues/search?ll="+o+"&client_id=WGP24ZPE3M4UTYO3STK2KU0XTLA4V4C5R3GUHQL5DJRFCKIA&client_secret=A1SD3AFP1YDTU1ATMYV4BFVX1V421CFBQQXB1Y2XZXZ2LVPW&v=20150819";$.getJSON(i,function(e){var n={name:e.response.venues[0].name,phone:e.response.venues[0].contact.formattedPhone,id:e.response.venues[0].id,url:e.response.venues[0].url};r.push(n)}).fail(function(){alert("Failed to load Foursquare data!")}),setTimeout(e,1e3)}};i(),a.currentPlace=ko.observable(this.placeList()[0].marker);for(var s=function(e){a.currentPlace().setAnimation(null),a.currentPlace(e),n(e);var t=e.placeInfo();l.open(map,e),l.setContent(t)},c=0;t>c;c++)google.maps.event.addListener(a.placeList()[c].marker,"click",function(){s(this)});a.setCurrentPlace=function(e){s(e.marker)};var l=new google.maps.InfoWindow;a.query=ko.observable(""),a.search=ko.computed(function(){return ko.utils.arrayFilter(a.placeList(),function(e){return e.marker.setMap(e.marker.title.toLowerCase().indexOf(a.query().toLowerCase())>=0?map:null),e.marker.title.toLowerCase().indexOf(a.query().toLowerCase())>=0})});var p=[],u=function(){var e="https://api.foursquare.com/v2/venues/search?ll=41.825283, -71.4126816&query=restaurant&client_id=WGP24ZPE3M4UTYO3STK2KU0XTLA4V4C5R3GUHQL5DJRFCKIA&client_secret=A1SD3AFP1YDTU1ATMYV4BFVX1V421CFBQQXB1Y2XZXZ2LVPW&v=20150819";$.getJSON(e,function(e){for(var n=0;20>n;n++){var a=e.response.venues[n];p.push(a)}}).fail(function(){alert("Failed to load Foursquare data! ")})};u();var m=$("#search-FS");setTimeout(function(){for(var e=0;20>e;e++){var n=p[e].name,a=p[e].id;m.append('<p><a href="https://foursquare.com/v/'+a+'" target="_blank">'+n+"</a></p>")}},1e3);var f="http://api.wunderground.com/api/ebf06033e08ca1b6/conditions/q/RI/Providence.json",v=$.get(f);v.done(function(e){$("#conditions").append("<p>"+e.current_observation.weather+"</p>"),$("#mobile-conditions").append("<p>"+e.current_observation.weather+"</p>"),$("#temp").append("<p>"+e.current_observation.temp_f+"° F</p>"),$("#mobile-temp").append("<p>"+e.current_observation.temp_f+"° F</p>")}),v.fail(function(){console.log("Unable to retrieve weather data")}),google.maps.event.addListener(l,"domready",function(){var e=$(".gm-style-iw"),n=e.prev();n.children(":nth-child(2)").css({display:"none"}),n.children(":nth-child(4)").css({display:"none"});var a=e.next();a.css({right:"38px",top:"12px"})})};ko.applyBindings(new n)});